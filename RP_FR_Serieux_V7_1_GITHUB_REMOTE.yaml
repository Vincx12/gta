$engine: 3
$onesync: on
name: "RP Sérieux FR (V7.1) — GitHub Remote (FIX)"
version: "7.1.1-fr"
author: "txAdmin Recipe Pack"
description: "Version GitHub Remote: le recipe télécharge d'abord TON repo (recipe_files) puis applique les fichiers. Fixe l'erreur recipe_files/server.cfg introuvable."

tasks:
  # 0) Télécharge TON repo (il doit être PUBLIC)
  - action: download_github
    src: https://github.com/Vincx12/gta
    ref: main
    dest: ./tmp/custom

  # 1) Base QBCore recipe + SQL
  - action: download_github
    src: https://github.com/qbcore-framework/txAdminRecipe
    ref: main
    dest: ./tmp/qbcore

  # 2) server.cfg depuis ton repo
  - action: move_path
    src: ./tmp/custom/recipe_files/server.cfg
    dest: ./server.cfg

  - action: move_path
    src: ./tmp/qbcore/myLogo.png
    dest: ./myLogo.png

  - action: connect_database
  - action: query_database
    file: ./tmp/qbcore/qbcore.sql

  # 3) Default cfx resources
  - action: download_github
    src: https://github.com/citizenfx/cfx-server-data
    subpath: resources
    dest: ./resources/[cfx-default]
  - action: remove_path
    path: ./resources/[cfx-default]/[gameplay]/chat

  # 4) oxmysql
  - action: download_file
    path: ./tmp/files/oxmysql.zip
    url: https://github.com/overextended/oxmysql/releases/download/v2.12.0/oxmysql.zip
  - action: unzip
    dest: ./resources/[standalone]
    src: ./tmp/files/oxmysql.zip

  # 5) Standalone deps
  - action: download_github
    dest: ./resources/[standalone]/progressbar
    ref: main
    src: https://github.com/qbcore-framework/progressbar
  - action: download_github
    dest: ./resources/[standalone]/interact-sound
    ref: master
    src: https://github.com/qbcore-framework/interact-sound
  - action: download_github
    dest: ./resources/[standalone]/PolyZone
    ref: master
    src: https://github.com/qbcore-framework/PolyZone

  # 6) Voice + map
  - action: download_github
    dest: ./resources/[voice]/pma-voice
    ref: main
    src: https://github.com/AvarianKnight/pma-voice
  - action: download_github
    dest: ./resources/[defaultmaps]/hospital_map
    ref: main
    src: https://github.com/qbcore-framework/hospital_map

  # 7) QBCore essentials
  - action: download_github
    dest: ./resources/[qb]/qb-core
    ref: main
    src: https://github.com/qbcore-framework/qb-core
  - action: download_github
    dest: ./resources/[qb]/qb-management
    ref: main
    src: https://github.com/qbcore-framework/qb-management
  - action: download_github
    dest: ./resources/[qb]/qb-cityhall
    ref: main
    src: https://github.com/qbcore-framework/qb-cityhall
  - action: download_github
    dest: ./resources/[qb]/qb-shops
    ref: main
    src: https://github.com/qbcore-framework/qb-shops
  - action: download_github
    dest: ./resources/[qb]/qb-fuel
    ref: main
    src: https://github.com/qbcore-framework/qb-fuel
  - action: download_github
    dest: ./resources/[qb]/qb-banking
    ref: main
    src: https://github.com/qbcore-framework/qb-banking
  - action: download_github
    dest: ./resources/[qb]/qb-policejob
    ref: main
    src: https://github.com/qbcore-framework/qb-policejob
  - action: download_github
    dest: ./resources/[qb]/qb-ambulancejob
    ref: main
    src: https://github.com/qbcore-framework/qb-ambulancejob
  - action: download_github
    dest: ./resources/[qb]/qb-mechanicjob
    ref: main
    src: https://github.com/qbcore-framework/qb-mechanicjob
  - action: download_github
    dest: ./resources/[qb]/qb-vehicleshop
    ref: main
    src: https://github.com/qbcore-framework/qb-vehicleshop
  - action: download_github
    dest: ./resources/[qb]/qb-vehiclesales
    ref: main
    src: https://github.com/qbcore-framework/qb-vehiclesales

  # 8) Extras
  - action: download_github
    dest: ./resources/[qb]/qb-customs
    ref: main
    src: https://github.com/xenfovn/qb-customs-2
  - action: download_github
    dest: ./resources/[qb]/qb-speedcameras
    ref: main
    src: https://github.com/tom-osborne/qb-speedcameras
  - action: download_github
    dest: ./resources/[qb]/qb-sna-billing
    ref: main
    src: https://github.com/Sna-aaa/qb-sna-billing
  - action: download_github
    dest: ./resources/[qb]/qb-lawyerjob
    ref: main
    src: https://github.com/viruspc2002/qb-lawyerjob

  # 9) Appliquer TES configs (depuis ton repo)
  - action: move_path
    src: ./tmp/custom/recipe_files/qbcore_config.lua
    dest: ./resources/[qb]/qb-core/config.lua
    overwrite: true
  - action: move_path
    src: ./tmp/custom/recipe_files/qbcore_jobs.lua
    dest: ./resources/[qb]/qb-core/shared/jobs.lua
    overwrite: true
  - action: move_path
    src: ./tmp/custom/recipe_files/qb_shops_config.lua
    dest: ./resources/[qb]/qb-shops/config.lua
    overwrite: true
  - action: move_path
    src: ./tmp/custom/recipe_files/qb_fuel_config.lua
    dest: ./resources/[qb]/qb-fuel/config.lua
    overwrite: true
  - action: move_path
    src: ./tmp/custom/recipe_files/qb_ambulance_config.lua
    dest: ./resources/[qb]/qb-ambulancejob/config.lua
    overwrite: true
  - action: move_path
    src: ./tmp/custom/recipe_files/qb_police_config.lua
    dest: ./resources/[qb]/qb-policejob/config.lua
    overwrite: true
  - action: move_path
    src: ./tmp/custom/recipe_files/qb_vehicleshop_config.lua
    dest: ./resources/[qb]/qb-vehicleshop/config.lua
    overwrite: true
  - action: move_path
    src: ./tmp/custom/recipe_files/qb_speedcameras_config.lua
    dest: ./resources/[qb]/qb-speedcameras/config.lua
    overwrite: true
  - action: move_path
    src: ./tmp/custom/recipe_files/qb_sna_billing_config.lua
    dest: ./resources/[qb]/qb-sna-billing/config.lua
    overwrite: true

  # 10) Ajouter TES ressources locales (depuis ton repo)
  - action: copy_path
    src: ./tmp/custom/recipe_files/qb-prefet
    dest: ./resources/[qb]/qb-prefet
  - action: copy_path
    src: ./tmp/custom/recipe_files/qb-tribunal-basic
    dest: ./resources/[qb]/qb-tribunal-basic
  - action: copy_path
    src: ./tmp/custom/recipe_files/ultra_realism
    dest: ./resources/[standalone]/ultra_realism

  # Cleanup
  - action: remove_path
    path: ./tmp
