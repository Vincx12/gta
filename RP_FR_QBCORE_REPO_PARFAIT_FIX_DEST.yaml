$schema: https://raw.githubusercontent.com/citizenfx/txAdmin/master/schema.json

name: RP FR QBCore - Repo Parfait (Fix dest exists)
author: Vincx12
description: Déploiement txAdmin depuis GitHub (corrige 'dest already exists' sur resources)

tasks:
  - action: download_github
    src: https://github.com/Vincx12/gta
    ref: main
    dest: ./temp

  # Place la config à la racine
  - action: move_path
    src: ./temp/recipe_files/server.cfg
    dest: ./server.cfg

  # Supprime le dossier resources si txAdmin l'a déjà créé (évite "dest already exists")
  - action: remove_path
    path: ./resources

  - action: ensure_dir
    path: ./resources

  # Déplace TOUTES les ressources du repo vers /resources
  - action: move_path
    src: ./temp/recipe_files/resources
    dest: ./resources

  # Nettoyage
  - action: remove_path
    path: ./temp
